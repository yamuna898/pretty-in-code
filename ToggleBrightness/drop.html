<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Smooth Switch</title>
        <style>
            body {
                background: #edf1f4;
                height: 100vh;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .base {
                position: relative;
                height: 400px;
                width: 500px;
                background: #edf1f4;
                border-radius: 55px;
                box-shadow: -20px -20px 28px rgba(232, 227, 227, 0.285),
                    20px 20px 28px rgba(1, 9, 23, 0.18);
                overflow: visible;
            }

            .switch {
                position: absolute;
                height: 20px;
                width: 40px;
                border-radius: 25px;
                background-color: #d5d8da;
                box-shadow: -5px -5px 8px rgba(255, 255, 255, 0.6),
                    5px 5px 8px rgba(0, 0, 0, 0.2);
                display: flex;
                align-items: center;
                justify-content: flex-start;
                padding: 2px;
                top: 0;
                left: 0;
                transform: translate(0, 0);
                animation: smoothTurn 2.5s cubic-bezier(0.65, 0, 0.35, 1) 1s 1
                    forwards;
            }

            .circle {
                height: 16px;
                width: 16px;
                border-radius: 50%;
                background-color: rgba(108, 61, 196, 0.317);
                animation: circleSlide 2.5s cubic-bezier(0.65, 0, 0.35, 1) 1s 1
                    forwards;
            }

            /* The trick: only animate translate, not top/left separately */
            @keyframes smoothTurn {
                0% {
                    transform: translate(-170px, -130px) rotate(0deg);
                }
                50% {
                    transform: translate(-80px, -140px) rotate(45deg);
                }
                100% {
                    transform: translate(50px, 50px) rotate(90deg);
                }
            }

            @keyframes circleSlide {
                0% {
                    transform: translateX(0);
                }
                100% {
                    transform: translateX(20px);
                }
            }
        </style>
    </head>
    <body>
        <div class="base">
            <div class="switch">
                <div class="circle"></div>
            </div>
        </div>
    </body>
</html>
